<mvc:View controllerName="com.viatris.materialmaster.controller.SystemDetails"
    xmlns:core="sap.ui.core"
    xmlns:l="sap.ui.layout"
    xmlns:mvc="sap.ui.core.mvc" displayBlock="true"
    xmlns="sap.m">
    <Page showHeader="true" enableScrolling="false" class="MM_Page sapUiTinyMarginBottom">
        <customHeader>
            <Bar>
                <contentLeft>
                    <Button icon="sap-icon://nav-back" press="onGoBackToCreateProject" class="MM_BtnDefault_noBorder"/>
                    <Title level="H5" titleStyle="H5" text="{i18n>requestNo} {CreateProject>/RequestHeader/data/requestNumber}" class="MM_Title" visible="{parts:['oAppModel>/sideNavigation/currentView'],formatter: '.formatter.fnVisible_requestNo'}"/>
                </contentLeft>
                <contentRight>
                    <Title level="H5" titleStyle="H5" text="{i18n>system} :" class="MM_Title MM_TitleTaskName"></Title>
                    <Select forceSelection="true" selectedKey="{MaterialDetails>/SystemData/targetSystem}" change="onChangeSystem" items="{MaterialDetails>/SystemData/listOfSystems}" >
                        <core:ListItem key="{MaterialDetails>MM_KEY}" text="{MaterialDetails>MM_SYSTEM_REF_LIST_CODE}" />
                    </Select>
                </contentRight>
            </Bar>
        </customHeader>
        <content>
            <IconTabBar stretchContentHeight="true" backgroundDesign="Transparent" headerMode="Inline" applyContentPadding="false" expanded="{device>/isNoPhone}" expandable="false" class="MM_IconTabBar" selectedKey="{CreateProject>/selectedSystemDetailsTab}" select="onPressIconTabBar">
                <items>
                    <IconTabFilter text="{i18n>basicData1}" key="BasicData1" visible="{parts:['CreateProject>/RequestHeader/data/requestType', 'oAppModel>/sideNavigation/currentView', 'MaterialDetails>/SystemData/repositorySystemStatusId', 'Repository>/MaterialSelected/repoSubmitFor'],formatter: '.formatter.fnVisible_BasicDataTabs'}">
                        <ScrollContainer height="100%" width="100%" horizontal="false" vertical="true">
                            <core:Fragment fragmentName="com.viatris.materialmaster.fragments.systemDetails.BasicData1" type="XML"/>
                        </ScrollContainer>
                    </IconTabFilter>
                    <IconTabFilter text="{i18n>basicData2}" key="BasicData2" visible="{parts:['CreateProject>/RequestHeader/data/requestType', 'oAppModel>/sideNavigation/currentView', 'MaterialDetails>/SystemData/repositorySystemStatusId', 'Repository>/MaterialSelected/repoSubmitFor'],formatter: '.formatter.fnVisible_BasicDataTabs'}">
                        <ScrollContainer height="100%" width="100%" horizontal="false" vertical="true">
                            <core:Fragment fragmentName="com.viatris.materialmaster.fragments.systemDetails.BasicData2" type="XML"/>
                        </ScrollContainer>
                    </IconTabFilter>
                    <IconTabFilter text="{i18n>additionalData}" key="AdditionalData">
                        <ScrollContainer height="100%" width="100%" horizontal="false" vertical="true">
                            <core:Fragment fragmentName="com.viatris.materialmaster.fragments.systemDetails.AdditionalData" type="XML"/>
                        </ScrollContainer>
                    </IconTabFilter>
                    <IconTabFilter text="{i18n>classification}" key="Classification" visible="{parts:['CreateProject>/RequestHeader/data/requestType', 'oAppModel>/sideNavigation/currentView','MaterialDetails>/SystemData/repositorySystemStatusId', 'Repository>/MaterialSelected/repoSubmitFor'],formatter: '.formatter.fnVisible_Classification'}">
                        <ScrollContainer height="100%" width="100%" horizontal="false" vertical="true">
                            <core:Fragment fragmentName="com.viatris.materialmaster.fragments.systemDetails.Classification" type="XML"/>
                        </ScrollContainer>
                    </IconTabFilter>
                    <!-- <IconTabFilter text="{i18n>documents}" key="docsComments">
                        <core:Fragment fragmentName="com.viatris.materialmaster.fragments.createProject.DocsComments" type="XML" class="MM_ContentScrollable" />
                    </IconTabFilter> -->
                </items>
            </IconTabBar>
        </content>
        <footer>
            <Bar>
                <contentRight>
                    <HBox>
                        <Button text="{i18n>saveAsDraft}" type="Emphasized" press="onClickSaveBtn" class="MM_BtnEmphasized" visible="{parts:['oAppModel>/taskDetails/wfTaskType', 'CreateProject>/MaterialList/selectedMaterialData/materialStatusId', 'oAppModel>/sideNavigation/currentView', 'CreateProject>/GeneralData/isUserRequestOwner'],formatter: '.formatter.fnVisible_SystemSaveAsDraft'}"/>
                    </HBox>
                </contentRight>
            </Bar>

        </footer>
    </Page>
</mvc:View>