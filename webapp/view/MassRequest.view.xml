<mvc:View controllerName="com.viatris.materialmaster.controller.MassRequest"
    xmlns:mvc="sap.ui.core.mvc" displayBlock="true"
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:l="sap.ui.layout"
    xmlns:main="sap.ui.webc.main"
    xmlns:table="sap.ui.table"
    xmlns:tnt="sap.tnt">
    <Page showHeader="true" enableScrolling="true" class="MM_Page">
        <customHeader>
            <Bar>
                <contentLeft>
                    <Title text="{i18n>massRequest}" class="MM_Title" level="H4" titleStyle="H4"></Title>
                </contentLeft>
                <contentRight>
                    <Button text="{i18n>downloadMassReqData}" type="Emphasized" class="MM_BtnEmphasized" press="onExportExcel"></Button>
                    <Button text="{i18n>createMassRequest}" type="Emphasized" class="MM_BtnEmphasized" press="onCreateMassRequest"></Button>
                </contentRight>
            </Bar>
        </customHeader>
        <content>
            <Panel expandable="true" expanded="true" width="auto" headerText="{i18n>filter}" class="MM_panel sapUiSmallMargin">
                <headerToolbar>
                    <OverflowToolbar style="Clear" class="MM_panelHeader_toolBar">
                        <main:Icon class="sapUiTinyMargin" name="sap-icon://filter" />
                        <Title text="{i18n>filter}" />
                        <ToolbarSpacer />
                    </OverflowToolbar>
                </headerToolbar>
                <content>
                    <l:Grid defaultSpan="XL3 L3 M6 S6" hSpacing="2" class="sapUiTinyMarginBeginEnd" binding="{MassRequest>/FilterDetails}">
                        <VBox>
                            <Label text="{i18n>massRequestID}" class="MM_Label" />
                            <Input value="{MassRequest>massRequestID}" class="MM_InputText" placeholder="{i18n>enterRequestID}" type="Number" />
                        </VBox>
                        <VBox>
                            <Label text="{i18n>massRequestDesc}" class="MM_Label" />
                            <Input value="{MassRequest>massRequestDesc}" class="MM_InputText" placeholder="{i18n>enterRequestDesc}" />
                        </VBox>
                        <VBox>
                            <Label text="{i18n>requestType}" class="MM_Label" />
                            <ComboBox selectedKey="{MassRequest>key_requestType}" class="MM_ComboBox" width="100%" placeholder="{i18n>selectRequestType}" items="{LookupModel>/massRequestRequestType}" change="fnHandleComboboxValidation">
                                <core:ListItem key="{LookupModel>MM_KEY}" text="{LookupModel>MM_REQUEST_TYPE_DESCRIPTION}"/>
                            </ComboBox>
                        </VBox>
                        <VBox>
                            <Label text="{i18n>requestStatus}" class="MM_Label" />
                            <ComboBox value="{MassRequest>massRequestStatus}" selectedKey="{MassRequest>key_requestStatus}" class="MM_ComboBox" width="100%" placeholder="{i18n>selectRequestStatus}" items="{LookupModel>/requestStatus}" change="fnHandleComboboxValidation">
                                <core:ListItem key="{LookupModel>MM_KEY}" text="{LookupModel>MM_REQUEST_STATUS_DESCRIPTION}"/>
                            </ComboBox>
                        </VBox>
                        <VBox>
                            <Label text="{i18n>requestCreationDateRange}" class="MM_Label" required="false"/>
                            <DateRangeSelection value="{MassRequest>requestCreationDateRange}" displayFormat="yyyy-MM-dd" placeholder="yyyy-mm-dd - yyyy-mm-dd" valueFormat="yyyy-MM-dd" class="MM_ComboBox" change=""/>
                        </VBox>
                        <!-- <VBox>
                            <Label text="{i18n>requestRequiredDateRange}" class="MM_Label" required="false"/>
                            <DateRangeSelection value="{MassRequest>requestRequiredDateRange}" displayFormat="yyyy-MM-dd" placeholder="yyyy-mm-dd - yyyy-mm-dd" valueFormat="yyyy-MM-dd" class="MM_ComboBox" change=""/>
                        </VBox> -->
                        <VBox>
                            <Label text="{i18n>createdBy}" class="MM_Label" required="false"/>
                            <!-- <Input placeholder="{i18n>createdBy}" class="MM_InputText" showSuggestion="true" suggestionItems="{LookupModel>/createdBy}" value="{MassRequest>createdBy}">
                                <suggestionItems>
                                    <core:Item text="{LookupModel>userEmail}" />
                                </suggestionItems>
                            </Input> -->
                            <ComboBox placeholder="{i18n>entercreatedBy}" width="100%" class="MM_ComboBox" items="{LookupModel>/createdBy}" selectedKey="{MassRequest>createdBy}" showSecondaryValues="true" filterSecondaryValues= "true" change="fnHandleComboboxValidation">
                                    <core:ListItem key="{LookupModel>userEmail}" text="{LookupModel>userEmail}" additionalText="{LookupModel>userName}"/>
                            </ComboBox>
                        </VBox>
                        <VBox>
                            <Label text="{i18n>materialType}" class="MM_Label" />
                            <ComboBox selectedKey="{MassRequest>materialType}" class="MM_ComboBox" width="100%" placeholder="{i18n>selectMaterialType}" items="{LookupModel>/requestSpecificLookups/materialType}" showSecondaryValues="true" filterSecondaryValues= "true" change="fnHandleComboboxValidation">
                                <core:ListItem key="{LookupModel>MM_KEY}" text="{LookupModel>MM_MATERIAL_TYPE_SAP_CODE} - {LookupModel>MM_MATERIAL_TYPE_DESCRIPTION}"/>
                            </ComboBox>
                        </VBox>
                        <VBox>
                            <Label text= "" class="MM_Label"/>
                            <CheckBox text="{i18n>priority}" selected="{MassRequest>priority}" class="MM_CheckBox" />
                        </VBox>
                        <VBox>
                            <Label text= "" class="MM_Label"/>
                        </VBox>
                        <VBox>
                            <Label text= "" class="MM_Label"/>
                        </VBox>
                        <VBox>
                            <Label text= "" class="MM_Label"/>
                        </VBox>
                        <VBox>
                            <Label text=""></Label>
                            <Toolbar class="MM_toolbar">
                                <ToolbarSpacer />
                                <Button text="{i18n>clear}" icon="sap-icon://clear-filter" type="Default" class="MM_BtnDefault " press="onClearFilterData" />
                                <Button text="{i18n>search}" icon="sap-icon://filter" type="Emphasized" class="MM_BtnEmphasized " press="onSearchData"/>
                            </Toolbar>
                        </VBox>
                    </l:Grid>
                </content>
            </Panel>

            <OverflowToolbar style="Clear" class="sapUiSmallMarginTop sapUiSmallMarginBeginEnd">
                <Title text="{i18n>requestDetailsList}" class="MM_Title" level="H5" titleStyle="H5"></Title>
                <Text emptyIndicatorMode="On" text="{MassRequest>/PaginationDetails/totalrecords}" class="MM_TextwithLeftBorder sapUiLargeMarginBegin"></Text>
            </OverflowToolbar>

            <VBox class="sapUiSmallMarginBeginEnd MM_TableContainer">
                <Table items="{MassRequest>/RequestDetailList}" noDataText="{i18n>NoDataAvailable}" contextualWidth="Auto" alternateRowColors="true" class="MM_table" sticky="ColumnHeaders">
                    <columns>
                        <Column hAlign="Begin">
                            <Text text="{i18n>requestID}" class="" />
                        </Column>
                        <Column hAlign="Begin">
                            <Text text="{i18n>requestDescription}" class="" />
                        </Column>
                        <Column hAlign="Begin">
                            <Text text="{i18n>requestType}" class="" />
                        </Column>
                        <Column hAlign="Begin">
                            <Text text="{i18n>requestStatus}" class="" />
                        </Column>
                        <Column hAlign="Begin">
                            <Text text="{i18n>createdOn} {i18n>gmt} " class="" />
                        </Column>
                        <!-- <Column hAlign="Begin">
                            <Text text="{i18n>dateRequired}" class="" />
                        </Column> -->
                        <Column hAlign="Begin">
                            <Text text="{i18n>createdBy}" class="" />
                        </Column>
                    </columns>
                    <items>
                        <ColumnListItem type="Navigation" press="onGetMassRequestDetails">
                            <cells>
                                <Text text="{MassRequest>requestNumber}" class="" />
                            </cells>
                            <cells>
                                <Text text="{MassRequest>requestDescription}" class="" />
                            </cells>
                            <cells>
                                <Text text="{parts:['MassRequest>requestTypeId', 'LookupModel>/massRequestRequestType'],formatter: '.formatter.getRequestTypetext'}" class="" />
                            </cells>
                            <cells>
                                <Text text="{parts:['MassRequest>requestStatusId', 'LookupModel>/requestStatus'],formatter: '.formatter.getStatustext'}" class="" />
                                <!-- <HBox>
                                    <ObjectStatus class="MM_Objectstatus" text="{MassRequest>requestStatus}" icon="{parts:['MassRequest>requestStatusId','LookupModel>/requestStatus'], formatter:'.formatter.getStatusicon'}" state="{parts:['MassRequest>requestStatusId','LookupModel>/requestStatus'], formatter:'.formatter.getStatusstate'}" inverted="true" active="false"/>
                                    <core:Icon src="sap-icon://hint" press="onget" class="sapUiTinyMarginBegin" tooltip="display msg for icon"/>
                                </HBox> -->
                            </cells>
                            <cells>
                                <Text text="{parts:['MassRequest>createdOn'], formatter:'.formatter.getDateFormatted'}" class="" />
                            </cells>
                            <!-- <cells>
                                <Text text="{parts:['MassRequest>dateRequired'], formatter:'.formatter.getDateFormatted'}" class="" />
                            </cells> -->
                            <cells>
                                <Text text="{MassRequest>createdBy}" class="" />
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table>
            </VBox>


        </content>
        <footer>
            <OverflowToolbar binding="{MassRequest>/PaginationDetails}" visible="{MassRequest>/PaginationDetails/footerVisible}">
                <Label text="{i18n>showingPage} {MassRequest>currentPage} {i18n>ofText} {MassRequest>totalPages}" textDirection="RTL" design="Bold"/>
                <ToolbarSpacer/>
                <HBox renderType="Bare" alignItems="Center" class="MM_PaginationBox_HBox">
                    <Button icon="sap-icon://nav-back" enabled="{parts:['MassRequest>currentPage'], formatter:'.formatter.enableLeftNavButton'}" class="MM_PaginationNavButton" press="onPrevPage"/>
                    <HBox renderType="Bare" alignItems="Center" items="{MassRequest>totalPagesArray}">
                        <Link text="{MassRequest>page}" press="onPageClick" fieldGroupIds="iD_PageNumber" class="MM_PaginationLinkColor" wrapping="true"/>
                    </HBox>
                    <Button icon="sap-icon://navigation-right-arrow" enabled="{parts:['MassRequest>currentPage','MassRequest>totalPages'], formatter:'.formatter.enableRightNavButton'}" class="MM_PaginationNavButton" press="onNextPage"/>
                </HBox>
                <HBox class="sapUiSmallMargin">
                    <Label text="{i18n>selectRowsPerPage}" class="sapUiTinyMarginTop sapUiTinyMarginEnd"/>
                    <Select items="{MassRequest>possibleRowsPerPage}" change="onSelectPageSize" selectedKey="{MassRequest>selectedRow}">
                        <core:Item text="{MassRequest>key}"/>
                    </Select>
                </HBox>
            </OverflowToolbar>
        </footer>
    </Page>
</mvc:View>
